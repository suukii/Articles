# 计算机网络和其他网络(电话、电台等)有什么不同

计算机网络更具通用性，它可以传输不同类型的数据，并且支持不同的应用。

# 计算机网络的应用

1. 网页(web)

```
一个 URL => a dozens of message exchanges => 网页
  6 次用来将 server name 转换成 IP 地址
  3 次用来建立 TCP 连接
  4 次用来发送和接收 HTTP 请求和响应(请求和响应，以及双方确认收到信息)
  4 次用来断开 TCP 连接
  还有在网络中的不同节点上跳来跳去的那些信息交换...
```

2. 音频/视频流(streaming audio and video)

a more timly transfer of messages

连续性(continuity)，不支持不连续性(比如快进)，而普通的网页是可以支持不连续性的，也就是可以只传送和浏览网页的一小部分。

3. 实时音频/视频(real-time audio and video)

对时效的要求更高，比如用 Skype 进行视频通信。

> 调查结果是，300 ms 的 round-trip delay 是可以被人们容忍的，100 ms 就非常流畅了。

音频/视频流一般只是服务器单向地向客户端发送数据，而实时音频/视频中，数据流一般是双向的。

# Connectivity

计算机是怎样互相连接的

### 最简单的情况

一个网络里面只有几个电脑，电脑与电脑之间都是通过实体的媒介(physical medium，如光纤等)来连接的，这种实体的媒介叫做 link(链路)，这种网络中的电脑叫做 node(node 也可能不是电脑，而是路由器等)。

- **point-to-point**(点对点) link 用来连接两台电脑
- **multiple-access**(多路访问) link：2 个以上的节点可以共用一个 link (如无线网络 wifi)，但这种连接的可覆盖的地理范围以及可连接的节点数都是有限的，所以一般用于 **last mile**(最后一里) 连接终端用户和外面的网络

# 连接电脑的方式

### 直连

如果电脑两两进行直连，那么会导致两种情况：一是，这个网络里只能有少数的几台电脑，二是，每台电脑上的连接线会多到难以管理。

不过，电脑也是可以间接连接的，比如 A 和 B 都分别和 C 直接连接，那么 A 和 B 就是间接连接的关系。

### 两种常见的将多台电脑设备连接起来的方法

#### 1. switched network (网络交换)

有一些节点是负责把数据转发出去的，这些节点一般会连接两个以上的 link，在一个网络系统中，这种节点合在一起就组成了一个 switched network。常见的 switched network 有以下两种：

- **circuit switched**(电路交换) 常用于电话系统
- **packet switched**(报文交换/分组交换) 常用于计算机网络系统

* packet switched

**feature** 有一个很重要的特性是，在这种网络中，节点之间发送的是数据块(discret blocks of data)，可以把这些数据想象成一个文件，或者一封邮件，一张图片，这些数据块一般叫做包(packet)或者数据报(message)。

报文传输，报文是不定长的，但分组交换是把长的报文划分为许多定长的报文分组，以分组为传输的基本单位。

**strategy** **store-and-forward(存储-转发方式)** 节点(交换机)会把接收到的数据储存在它的内存中，然后再转发出去，而 circuit switched 则是用一个圈来把一系列的 link 连接起来，源节点的数据可以通过这个圈到达目的节点。

#### 2. internetwork

若干个 network 互相连接在一起可以组成一个 internetwork(或者简称 internet)。

一般传统是将广义上的互联网叫做 internet，而 TCP/IP 互联网叫做 Internet。

连接了两个以上网络的节点叫做路由或者网关(router or gateway)，它的功能跟 switch 差不多，也是把来自一个网络的数据转发给另一个网络。

现在主机之间都直接或者间接地连接了起来，但这并不表示我们实现了 host-to-host 连接，要达到这一步，还需要给每个节点分配一个 IP 地址。

源节点想要发送数据出去的话，要指定目标节点的 IP 地址，如果源节点和目标节点不是直连的，那 switches 和 routers 会根据这个 IP 地址来决定怎么样把数据转发出去，这个根据地址决定怎么把数据转发到目标节点的过程叫做路由(routing)。

上面这种情况是目标节点只有一个(unicast)，但也有可能，源节点想要把信息发送给网络中的所有节点(broadcast)，或者某些节点(multicast)。

# 总结

网络可以递归地定义为，两个或以上节点通过物理链路连接起来所构成，或者两个或以上网络通过一个节点连接起来所构成。


# Cost-Effective Resource Sharing

之前提到，计算机网络中用到的是分组交换网络，之所以选择分组交换，是因为它的效率更高。

## 多对主机想要同时交换数据时，怎样同时共享网络？

### multiplexing 多路复用(多工)

有几种常见的方法可以实现在一个物理链路上传送多个数据流

* **synchronous time-division multiplexing(STDM)** 时分复用：把时间分成同等大小的若干块(时隙)，每个 flow(数据流) 都有同等的机会在物理链路上传输。

* **frequency-division multiplexing(FDM)** 频分复用：使用不同的频段来传送不同的 flow

这两者的限制是：1. 如果有一个 flow 没有要发送的数据，就会导致空闲的时隙或者频段；2. 使用这两种方法的前提是，flow 的大小上限是固定的，而且是提前确定的，因为重新调整 STDM 的时隙和 FDM 的频段都是不太现实的。

* **statistical multiplexing** 统计复用，解决了前两者的问题。跟 STDM 相似的是，它会把时间分成小块，每块时间只能传输一个 flow 的数据，不同的是，时间大小不是固定的，二是按需分配，这就解决了空闲时隙(idle time)的问题，提高了数据传输效率。

还有一点很重要，如果一个 flow 的数据特别多，一直占据着链路，那其他 flow 就没有机会传输数据了。所以需要一个机制来限制每次传输的数据大小，让每个 flow 都有机会传输它们的数据。统计复用技术定义了一个大小限制，这个 size-limited block of data 就叫做包(packet)(相对于应用想要传输的的 message(报文) 而言，message 的大小是不固定的，可能会很大)。

因为 packet 的大小是固定的，一个 message 的大小可能会超过一个 packet 的大小，所以就需要分成若干个 packet 发送出去，接收方收到 packet 后再将它们组装成 message。