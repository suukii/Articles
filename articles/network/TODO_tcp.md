# TCP - Reliable Byte Stream

## 特性

1. 因为 TCP 支持的是 process-to-process 连接，而每台计算机上可能同时运行着几个程序，所以两个程序在通信之前需要先建立连接。在建立连接的过程中，两个程序会交换一些状态来启动滑动窗口算法，因此在断开连接的时候，双方也要互相确认之后才能断开，以便确认这些状态可以被释放。

2. 对于 link-to-link 连接来说，我们只有一种 RTT(round-trip time)，而对于 TCP 连接来说，RTT 的值并不是固定的，不同的 TCP 连接有不同的 RTT，甚至同一个 TCP 连接在不同时间 RTT 也不同，这就意味着 TCP 的 timeout 机制(也就是触发重传的时机)要设计得非常灵活。

3. 数据包在网络传输的过程中并不保证顺序，如果我们接收到了 1，2，4 号数据包，但没有收到 3 号数据包，那 TCP 怎么判断 3 号数据包是迟到还是根本不会到？所以 TCP 定义了一个报文最大生存时间(MSL)，过了这个时间包就会被丢弃。这是基于 IP 的 TTL(time to live)的，在 IP 层中，过了 TTL 的包会被丢弃。

4. 建立连接的双方，一方可能有很大的 buffer space 来处理数据，另一方可能处理数据的能力有限，所以 TCP 需要一个机制来让双方知道对方的接收能力，以保证发送数据的一方不会发送了过多的数据，导致接收方处理不过来。

5. 数据包在到达目标程序前可能需要经多个网络中传输，可能其中一些网络支持传输的数据量很大，一些网络支持传输的数据量很小，所以 TCP 还需要一个机制，用来保证数据发送方不发送过多的数据，造成网络拥塞。
